@model SmartInvoice.Models.Invoice

@{
    ViewData["Title"] = "Edit Invoice";
}

<div class="container mt-4">
    <h2 class="text-warning mb-3">✏ Edit Invoice</h2>

    <form asp-action="Edit" method="post">
        <input type="hidden" asp-for="Id" />

        <!-- Customer Dropdown -->
        <div class="mb-3">
            <label asp-for="CustomerId" class="form-label">Customer</label>
            <select asp-for="CustomerId" class="form-control" asp-items="ViewBag.Customers">
                <option value="">-- Select Customer --</option>
            </select>
        </div>

        <!-- Date -->
        <div class="mb-3">
            <label asp-for="Date" class="form-label">Invoice Date</label>
            <input asp-for="Date" class="form-control" type="date" />
        </div>

        <!-- Due Date -->
        <div class="mb-3">
            <label asp-for="DueDate" class="form-label">Due Date</label>
            <input asp-for="DueDate" class="form-control" type="date" />
        </div>

        <!-- Quantity -->
        <div class="mb-3">
            <label asp-for="Quantity" class="form-label">Quantity</label>
            <input asp-for="Quantity" id="Quantity" class="form-control" type="number" />
        </div>

        <!-- Price -->
        <div class="mb-3">
            <label asp-for="Price" class="form-label">Price</label>
            <input asp-for="Price" id="Price" class="form-control" type="number" step="0.01" />
        </div>

        <!-- Currency -->
        <div class="mb-3">
            <label asp-for="Currency" class="form-label">Currency</label>
            <select asp-for="Currency" class="form-control" asp-items="new SelectList(ViewBag.Currencies)">
                <option value="">-- Select Currency --</option>
            </select>
        </div>

        <!-- Amount -->
        <div class="mb-3">
            <label asp-for="Amount" class="form-label">Amount</label>
            <input asp-for="Amount" id="Amount" class="form-control" readonly />
        </div>

        <!-- Status -->
        <div class="mb-3">
            <label asp-for="Status" class="form-label">Status</label>
            <select asp-for="Status" class="form-control">
                <option value="Unpaid">Unpaid</option>
                <option value="Paid">Paid</option>
            </select>
        </div>

        <!-- Description -->
        <div class="mb-3">
            <label asp-for="Description" class="form-label">Description</label>
            <input asp-for="Description" class="form-control" />
        </div>

        <button type="submit" class="btn btn-warning">💾 Update</button>
        <a asp-action="Index" class="btn btn-secondary">Back</a>
    </form>
</div>

@section Scripts {
    <script>
        function updateAmount() {
            const quantity = parseFloat(document.getElementById("Quantity").value) || 0;
            const price = parseFloat(document.getElementById("Price").value) || 0;
            document.getElementById("Amount").value = (quantity * price).toFixed(2);
        }

        document.getElementById("Quantity").addEventListener("input", updateAmount);
        document.getElementById("Price").addEventListener("input", updateAmount);
    </script>
}